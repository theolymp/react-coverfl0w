{"version":3,"file":"index.js","sources":["../src/hooks/useTouchEvent.ts","../src/hooks/useKeyPress.ts","../src/hooks/useWindowSize.ts","../src/utils/constants.ts","../src/utils/clamp.ts","../src/utils/allSettled.ts","../src/utils/fetchImages.ts","../src/utils/resizeImage.ts","../src/Coverflow.tsx"],"sourcesContent":["import { useCallback, useEffect, useReducer, useState } from 'react';\nconst TOUCH_START = 'touchStart';\nconst TOUCH_MOVE = 'touchMove';\nconst TOUCH_END = 'touchEnd';\n\ninterface State {\n  start: number;\n  end: number;\n  isLeft: boolean;\n  isRight: boolean;\n  isMoving: boolean;\n}\n\ntype Action =\n  | { type: typeof TOUCH_END }\n  | { type: typeof TOUCH_START; payload: number }\n  | { type: typeof TOUCH_MOVE; payload: number };\n\nconst initialState = {\n  start: 0,\n  end: 0,\n  isLeft: false,\n  isRight: false,\n  isMoving: false,\n};\nfunction reducer(state: State, action: Action) {\n  switch (action.type) {\n    case TOUCH_START:\n      return {\n        ...state,\n        start: action.payload,\n        isMoving: false,\n      };\n    case TOUCH_MOVE:\n      if (state.start - action.payload > 70) {\n        return {\n          ...state,\n          isRight: true,\n          isLeft: false,\n          isMoving: true,\n          end: action.payload,\n        };\n      }\n      if (state.start - action.payload < -70) {\n        return {\n          ...state,\n          isRight: false,\n          isLeft: true,\n          isMoving: true,\n          end: action.payload,\n        };\n      }\n      return {\n        ...state,\n        isMoving: true,\n        end: action.payload,\n      };\n    case TOUCH_END:\n      return {\n        ...state,\n        isRight: false,\n        isLeft: false,\n        isMoving: false,\n      };\n    default:\n      throw new Error();\n  }\n}\n\nfunction useTouchEvent(): [(node: HTMLElement) => void, State] {\n  const [el, setEl] = useState<HTMLElement | null>(null);\n  // https://reactjs.org/docs/hooks-faq.html#how-can-i-measure-a-dom-node\n  const ref = useCallback((node: HTMLElement) => {\n    if (node !== null) {\n      setEl(node);\n    }\n  }, []);\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  useEffect(() => {\n    if (el !== null) {\n      const handleTouchStart = (e: TouchEvent) => {\n        dispatch({ type: TOUCH_START, payload: e.targetTouches[0].clientX });\n      };\n      const handleTouchMove = (e: TouchEvent) => {\n        dispatch({ type: TOUCH_MOVE, payload: e.targetTouches[0].clientX });\n      };\n      const handleTouchEnd = () => {\n        dispatch({ type: TOUCH_END });\n      };\n\n      // Add event listener\n      el.addEventListener('touchstart', handleTouchStart, { passive: false });\n      el.addEventListener('touchmove', handleTouchMove, { passive: false });\n      el.addEventListener('touchend', handleTouchEnd, { passive: false });\n\n      // Remove event listener on cleanup\n      return () => {\n        el.addEventListener('touchstart', handleTouchStart);\n        el.addEventListener('touchmove', handleTouchMove);\n        el.addEventListener('touchend', handleTouchEnd);\n      };\n    }\n    return null;\n  }, [el]);\n\n  return [ref, state];\n}\n\nexport default useTouchEvent;\n","import { useEffect, useState } from 'react';\n// Taken from useHooks site\nfunction useKeyPress(targetKey: string) {\n  // State for keeping track of whether key is pressed\n  const [keyPressed, setKeyPressed] = useState(false);\n\n  // If pressed key is our target key then set to true\n  function downHandler({ key }: KeyboardEvent) {\n    if (key === targetKey) {\n      setKeyPressed(true);\n    }\n  }\n\n  // If released key is our target key then set to false\n  const upHandler = ({ key }: KeyboardEvent) => {\n    if (key === targetKey) {\n      setKeyPressed(false);\n    }\n  };\n\n  // Add event listeners\n  useEffect(() => {\n    window.addEventListener('keydown', downHandler);\n    window.addEventListener('keyup', upHandler);\n    // Remove event listeners on cleanup\n    return () => {\n      window.removeEventListener('keydown', downHandler);\n      window.removeEventListener('keyup', upHandler);\n    };\n  }, []); // Empty array ensures that effect is only run on mount and unmount\n\n  return keyPressed;\n}\n\nexport default useKeyPress;\n","import { useEffect, useState } from \"react\";\nfunction useWindowSize() {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  const [windowSize, setWindowSize] = useState({\n    width: undefined,\n    height: undefined\n  });\n\n  useEffect(() => {\n    // Handler to call on window resize\n    function handleResize() {\n      // Set window width/height to state\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    }\n\n    // Add event listener\n    window.addEventListener(\"resize\", handleResize);\n\n    // Call handler right away so state gets updated with initial window size\n    handleResize();\n\n    // Remove event listener on cleanup\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []); // Empty array ensures that effect is only run on mount\n\n  return windowSize;\n}\n\nexport default useWindowSize;\n","export const ROTATION = 45;\nexport const OPACITY_ORDER = [1, 0.8, 0.5, 0.2];\nexport const SCALE_ORDER = [1, 0.7, 0.6, 0.5, 0.4, 0.3, 0.2, 0.1];\n\n","const clamp = (value: number, lowBound: number, highBound: number) => Math.max(lowBound, Math.min(highBound, value));\n\nexport default clamp;\n","export interface PromiseResolution<T> {\n  status: \"fulfilled\";\n  value: T;\n}\n\nexport interface PromiseRejection {\n  status: \"rejected\";\n  reason: Error;\n}\n\nexport type PromiseResult<T> = PromiseResolution<T> | PromiseRejection;\n\n// @TODO: these types don't actually work.. at all...\nconst allSettled = <T>(promises: Promise<T>[]): Promise<PromiseResult<T>[]> => {\n  let wrappedPromises = promises.map(p =>\n    Promise.resolve(p).then(\n      val => ({ status: \"fulfilled\", value: val }) as PromiseResolution<T>,\n      (err: Error) => ({ status: \"rejected\", reason: err }) as PromiseRejection\n    )\n  );\n\n  return Promise.all(wrappedPromises);\n};\n\nexport default allSettled;\n","import allSettled from './allSettled';\n\nconst fetchElement = (element : Element) => {\n  return new Promise<Element>((resolve, reject) => {\n    if(element.tagName === 'IMG')\n    {\n      const img = element as HTMLImageElement;\n      img.onload = () => resolve(element);\n      img.onerror = () => reject('oops');\n      img.setAttribute('src', element.getAttribute('src'));\n      return;\n    }\n\n    const images = element.getElementsByTagName('img');\n    const tasks = [];\n    for(let i = 0; i < images.length; i++){\n      const element = images[i] as HTMLImageElement;\n      tasks.push(new Promise<HTMLImageElement>((res,rej) => {\n        element.onload = () => res(element);\n        element.onerror = () => rej('oops');\n        element.setAttribute('src', element.getAttribute('src'));\n      }))\n    }\n\n    if(tasks.length < 1){\n      resolve(element);\n      return;\n    }\n\n    allSettled(tasks).then(() => resolve(element)).catch(() => reject('subimg oops'));\n  });\n};\n\nconst fetchElements = (elements: Element[]) => {\n  const promises = elements.map(fetchElement);\n  return allSettled(promises);\n};\n\nexport default fetchElements;\n","// https://stackoverflow.com/questions/1106339/resize-image-to-fit-in-bounding-box\nconst resizeImage = (coverHeight: number, coverWidth: number, element: Element) => {\n  let {height, width} = element.getBoundingClientRect();\n\n  height = height || coverHeight;\n  width = width || coverWidth;\n\n  console.log(height, width);\n  const widthScale = coverWidth / width;\n  const heightScale = coverHeight / height;\n  const scale = Math.min(widthScale, heightScale);\n  return {\n    height: height * scale,\n    width: width * scale,\n  };\n};\n\nexport default resizeImage;\n","import React, { FC, useEffect, useLayoutEffect, useMemo, useRef, useState } from 'react';\n\nimport useTouchEvent from './hooks/useTouchEvent';\nimport useKeyPress from './hooks/useKeyPress';\nimport useWindowSize from './hooks/useWindowSize';\nimport { OPACITY_ORDER, ROTATION, SCALE_ORDER } from './utils/constants';\nimport { PromiseRejection, PromiseResolution } from './utils/allSettled';\nimport clamp from './utils/clamp';\nimport fetchElements from './utils/fetchImages';\nimport resizeElement from './utils/resizeImage';\nimport { CoverflowProps, ElementInfo as ElementInfo } from './types';\n\nimport './styles.scss';\n\nconst isPromiseResolution = <T extends unknown>(\n  promise: PromiseResolution<T> | PromiseRejection\n): promise is PromiseResolution<T> => {\n  return (promise as PromiseResolution<T>).value !== undefined;\n};\n\nconst Coverflow: FC<CoverflowProps> = props => {\n  const { className, elements, slidesPerSide, rotation = ROTATION, opacityInterval = OPACITY_ORDER, scaleInterval = SCALE_ORDER } = props;\n  /**\n   * Sliders per side\n   */\n  const diff = slidesPerSide + 1 - opacityInterval.length;\n  const isSlidesGreaterThanOpacityLength = diff >= 0;\n  const slidesGreaterThanOpacityLength = useMemo(\n    () => () => [...opacityInterval, ...Array(diff).fill(opacityInterval[opacityInterval.length - 1]), 0],\n    [diff, opacityInterval]\n  );\n  const slidesLessThanOpacityLength = useMemo(() => () => [...opacityInterval.slice(0, slidesPerSide + 1), 0], [\n    opacityInterval,\n    slidesPerSide,\n  ]);\n  const opacityIntervalOverride = useMemo(\n    () =>\n      slidesPerSide\n        ? isSlidesGreaterThanOpacityLength\n          ? slidesGreaterThanOpacityLength()\n          : slidesLessThanOpacityLength()\n        : OPACITY_ORDER,\n    [isSlidesGreaterThanOpacityLength, slidesGreaterThanOpacityLength, slidesLessThanOpacityLength, slidesPerSide]\n  );\n\n  const coverflowRef = useRef<HTMLInputElement | undefined>();\n  const [leftEdgeList, setLeftEdgeList] = useState<number[]>([]);\n  const [elementsList, setElementsList] = useState<Element[]>([]);\n  const [elementInfoList, setElementInfoList] = useState<ElementInfo[]>([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const { height, width } = useWindowSize();\n  const leftArrowKeyPress = useKeyPress('ArrowLeft');\n  const rightArrowKeyPress = useKeyPress('ArrowRight');\n  const [ref, { isMoving, isLeft, isRight }] = useTouchEvent();\n\n  useEffect(() => {\n    if (isMoving && isLeft) {\n      setCurrentIndex(currentIndex => (currentIndex > 0 ? currentIndex - 1 : currentIndex));\n    }\n    if (isMoving && isRight) {\n      setCurrentIndex(currentIndex => (currentIndex < elementsList.length - 1 ? currentIndex + 1 : currentIndex));\n    }\n  }, [isMoving, isLeft, isRight, elementsList.length]);\n\n  /**\n   * Arrow Keys\n   */\n  useEffect(() => {\n    if (leftArrowKeyPress) {\n      setCurrentIndex(currentIndex => (currentIndex > 0 ? currentIndex - 1 : currentIndex));\n    }\n    if (rightArrowKeyPress) {\n      setCurrentIndex(currentIndex => (currentIndex < elementsList.length - 1 ? currentIndex + 1 : currentIndex));\n    }\n  }, [leftArrowKeyPress, rightArrowKeyPress, elementsList.length]);\n\n\n  console.log('elements: ', elements);\n\n  let detachedElements : Element[] = [];\n\n  if(elements instanceof Array){\n    detachedElements = elements as Element[];\n  }\n  else{\n    for(let i = 0; i < elements.length; i++){\n      detachedElements.push(elements[i])\n    }\n  }\n\n  detachedElements.filter(x => !!x.parentElement).forEach(x => x.parentElement.removeChild(x));\n\n\n  /**\n   * Image fetch\n   */\n  useEffect(() => {\n    const fetch = async (originalElementList: Element[]) => {\n      const fetchedElements = await fetchElements(originalElementList);\n      console.log('Fetched Elements: ', fetchedElements);\n      const succeededElements = fetchedElements\n        .filter(({ status }) => {\n          return status === 'fulfilled';\n        })\n        .map(item => {\n          if (isPromiseResolution(item)) {\n            return item.value;\n          }\n\n          return undefined;\n        });\n      setElementsList(succeededElements);\n      setCurrentIndex(Math.floor(succeededElements.length / 2));\n    };\n    fetch(detachedElements);\n  }, [elements]);\n\n  /**\n   * Sizing / Edges\n   */\n  useLayoutEffect(() => {\n    let leftEdgeList: number[] = []; // raw image no scale applied\n    let elementInfoList: ElementInfo[] = [];\n    let edge = 0;\n    const coverflowHeight =\n      coverflowRef.current !== undefined ? coverflowRef.current.getBoundingClientRect().height : 0;\n    const coverflowWidth = coverflowRef.current !== undefined ? coverflowRef.current.getBoundingClientRect().width : 0;\n\n    elementsList.forEach((element, index) => {\n      const elementInfo = {} as ElementInfo;\n      const distanceFromMiddle = index - currentIndex;\n      const absDistanceFromMiddle = Math.abs(index - currentIndex);\n      const scale = scaleInterval[clamp(absDistanceFromMiddle, 0, scaleInterval.length - 1)];\n      const imageDimension = resizeElement(coverflowHeight, coverflowWidth, element);\n      const scaledWidth = imageDimension.width * scale;\n      leftEdgeList.push(edge);\n      const rotate = index > currentIndex ? -rotation : index === currentIndex ? 0 : rotation;\n      const zIndex = 100 - absDistanceFromMiddle;\n      const opacity = opacityIntervalOverride[clamp(absDistanceFromMiddle, 0, opacityIntervalOverride.length - 1)];\n      const isVisible =\n        opacityIntervalOverride[absDistanceFromMiddle] !== 0 &&\n        opacityIntervalOverride[absDistanceFromMiddle] !== undefined;\n\n      elementInfo.isCurrentImage = index === currentIndex;\n      elementInfo.isVisible = isVisible;\n      elementInfo.height = imageDimension.height;\n      elementInfo.width = imageDimension.width;\n      elementInfo.scaledWidth = scaledWidth;\n      elementInfo.zIndex = zIndex;\n      elementInfo.scale = scale;\n      elementInfo.rotate = rotate;\n      elementInfo.opacity = opacity;\n      elementInfo.element = element;\n\n      // LEFT HAND SIDE\n      if (distanceFromMiddle < 0) {\n        // we only want to move 20% so they overlap\n        edge += scaledWidth * 0.2;\n      } else {\n        // RIGHT HAND SIDE\n        const nextImage  : Element|null = elementsList[index + 1] || null;\n        if (nextImage) {\n          const nextImageDistanceFromCenter = index + 1 - currentIndex;\n          const nextScale = scaleInterval[clamp(Math.abs(nextImageDistanceFromCenter), 0, scaleInterval.length - 1)];\n          const nextImageDimension = resizeElement(coverflowHeight, coverflowWidth, nextImage);\n          const nextImageScaledWidth = nextImageDimension.width * nextScale;\n          edge += scaledWidth - nextImageScaledWidth + nextImageScaledWidth * 0.2;\n        } else {\n          edge += scaledWidth;\n        }\n      }\n\n      elementInfoList.push(elementInfo);\n    });\n\n    setElementInfoList(elementInfoList);\n    setLeftEdgeList(leftEdgeList);\n  }, [currentIndex, elementsList, height, width, scaleInterval, opacityIntervalOverride]);\n\n  const handleButtonClick = (index = 0, href: string) => {\n    if (index === currentIndex && href) {\n      window.open(href, '_blank');\n    }\n    setCurrentIndex(index);\n  };\n\n  if (!elementInfoList.length) {\n    return null;\n  }\n\n  return (\n    <div className=\"main\">\n      <div className={`${className ?? ''} coverflow-wrapper`} ref={ref}>\n        <div\n          ref={coverflowRef}\n          className=\"coverflow\"\n          style={{\n            transform: `translateX(-${leftEdgeList[currentIndex] + elementInfoList[currentIndex]?.width / 2}px)`,\n          }}\n        >\n          {elementInfoList.map((imageInfo, index) => {\n            const {\n              zIndex,\n              href,\n              element,\n              scaledWidth,\n              width,\n              height,\n              rotate,\n              opacity,\n              scale,\n              isCurrentImage,\n              isVisible,\n            } = imageInfo;\n            const leftPosition = leftEdgeList[index];\n            return (\n              <div\n                key={index}\n                className={`coverflow__image-container ${isVisible ? 'coverflow__image-container--visible' : ''} ${\n                  isCurrentImage ? 'coverflow__image-container--active' : ''\n                }`}\n                style={{\n                  zIndex: zIndex,\n                  left: `${leftPosition}px`,\n                  width: `${scaledWidth}px`,\n                  height: `${height}px`,\n                }}\n              >\n                <button\n                  className=\"coverflow__button\"\n                  tabIndex={isCurrentImage && href ? 0 : -1}\n                  onClick={() => {\n                    if (isVisible) {\n                      handleButtonClick(index, href);\n                    }\n                  }}\n                  style={{\n                    transform: `scale(${scale}) rotateY(${rotate}deg)`,\n                    pointerEvents: isVisible ? 'all' : 'none',\n                    cursor: `${isCurrentImage && href ? 'pointer' : ''}`,\n                  }}\n                >\n                  <div dangerouslySetInnerHTML={{__html: element.outerHTML }} className=\"coverflow__element\" style={{\n                      height: `${height}px`,\n                      width: `${width}px`,\n                      opacity: `${opacity}`,\n                    }}>\n                  </div>\n                </button>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Coverflow;\n"],"names":["useState","useCallback","useReducer","useEffect","useMemo","useRef","useLayoutEffect","resizeElement","React"],"mappings":"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"}